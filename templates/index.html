<!DOCTYPE html>
<html>

<head>
    <title>Mediagrabber - index</title>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
</head>

<body>
    <div class="split download">
        <div class="centered downloadDiv">
            <h1>MediaGrabber</h1>
            <h1>A simple iOS shortcut to download videos from the internet</h1>
            <a id="latestDownloadURL" class="button"
                href="https://www.icloud.com/shortcuts/c132b3146d5b479ba9f6d46043d0071e">
                <div id="latestButton" class="innerbutton expandOutElement">Download latest version</div>
            </a>

            <div id="legacyReleases">

                <div class="releaseTableView">
                    <span class="releaseVersion">v2.1.1</span>
                    <span class="releaseDate">(06/15/2022)</span>
                    <a class="button right" href="https://www.icloud.com/shortcuts/c233272f20e14a4cb37d084744591ad5">
                        <div class="innerbutton noanimation">Download</div>
                    </a>
                    <ul>
                        <li>Server changes: <ul>
                                <li>"dont_retry_as_mkv" header</li>
                                <li>"format_extension" header</li>
                                <li>Better handling of some cases (GIFs)</li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <hr class="solid">

                <div class="releaseTableView">
                    <span class="releaseVersion">v2.1</span>
                    <span class="releaseDate">(06/13/2022)</span>
                    <a class="button right" href="https://www.icloud.com/shortcuts/c233272f20e14a4cb37d084744591ad5">
                        <div class="innerbutton noanimation">Download</div>
                    </a>
                    <ul>
                        <li>API version bump</li>
                        <li>Now using changeable vars for the URLs</li>
                        <li>Version check</li>
                        <li>Fixed endpoints (2.0->2.1)</li>
                        <li>Fixed save for other formats</li>
                        <li>Added an option to input a custom format to save</li>
                    </ul>
                </div>

                <hr class="solid">

                <div class="releaseTableView">
                    <span class="releaseVersion">v2.0.1</span>
                    <span class="releaseDate">(06/09/2022)</span>
                    <a class="button right" href="https://www.icloud.com/shortcuts/c132b3146d5b479ba9f6d46043d0071e">
                        <div class="innerbutton noanimation">Download</div>
                    </a>
                    <ul>
                        <li>Hotfix for new URLs</li>
                    </ul>
                </div>

                <hr class="solid">

                <div class="releaseTableView">
                    <span class="releaseVersion">v2.0</span>
                    <span class="releaseDate">(06/08/2022)</span>
                    <a class="button right" href="https://www.icloud.com/shortcuts/70e4ab2ae07249a7bc52a346beae4a9c">
                        <div class="innerbutton noanimation">Download</div>
                    </a>
                    <ul>
                        <li>Initial rewrite</li>
                    </ul>
                </div>

                <hr class="solid">

                <div class="releaseTableView">
                    <span class="releaseVersion">v1.0</span>
                    <a class="button right">
                        <div class="innerbutton noanimation unavailable">Download</div>
                    </a>
                    <ul>
                        <li>Initial release</li>
                    </ul>
                </div>
            </div>

            <a id="serverSource" class="button" href="https://github.com/nixuge/mediagrabber">
                <div class="innerbutton expandOutElement">Server source</div>
            </a>
            <a id="originalSource" class="button" href="https://github.com/yt-dlp/yt-dlp/blob/master/supportedsites.md">
                <div class="innerbutton expandOutElement">Supported websites</div>
            </a>
            <a id="originalSource" class="button" href="https://github.com/sayem314">
                <div class="innerbutton expandOutElement">Original</div>
            </a>
        </div>
    </div>


    <div class="split api">
        <div class="centered">
            <h1>API documentation</h1>

            <div id="get_current_version">
                <div class="endpoint GET" onclick="toggle_api('endpointInfo_get_current_version')">
                    <span class="method GET">GET</span>
                    <span>/api/get_current_version</span>
                </div>
                <div id="endpointInfo_get_current_version" class="endpointInfo">
                    <h3 class="underline">Result</h3>
                    <span>The endpoint should return the current API/Script version as a simple string<br>As an example: v2.1</span>
                </div>
            </div>


            <div id="get_best_qualities">
                <div class="endpoint GET" onclick="toggle_api('endpointInfo_get_best_qualities')">
                    <span class="method GET">GET</span>
                    <span>/api/v2.1/get_best_qualities</span>
                </div>
                <div id="endpointInfo_get_best_qualities" class="endpointInfo">
                    <table>
                        <h3 class="underline">Headers</h3>
                        <tr>
                            <td class="underline">Name</td>
                            <td class="underline">Needed</td>
                            <td class="underline">Format</td>
                            <td class="underline">Note</td>
                        </tr>
                        <tr>
                            <td>url</td>
                            <td>True</td>
                            <td>str</td>
                            <td>URL to download.</td>
                        </tr>
                    </table>
                    <br>
                    <h3 class="underline">Result</h3>
                    <span>The endpoint should return a dict (json) with the following structure:
                        <ul>
                            <li>Display name for the user<ul>
                                <li>value: the format ID</li>
                                <li>other (optional): Only on the "see all formats" key, made for easier handling on the iOS shortcut side. If present, value will always be True (but is irrelevant)</li>
                            </ul></li>
                        </ul>
                        <br>
                        As an example:
                        <ul>
                            <li>Best video (only)<ul>
                                <li>value: bestvideo</li>
                            </ul></li>
                            <li>Best audio (only)<ul>
                                <li>value: bestaudio</li>
                            </ul></li>
                            <li>Best video and best audio merged<ul>
                                <li>value: bestvideo+bestaudio</li>
                            </ul></li>
                            <li>See all formats<ul>
                                <li>value: null</li>
                                <li>other: True</li>
                            </ul></li>
                        </ul>
                    </span>
                </div>
            </div>

            <div id="get_all_qualities">
                <div class="endpoint GET" onclick="toggle_api('endpointInfo_get_all_qualities')">
                    <span class="method GET">GET</span>
                    <span>/api/v2.1/get_all_qualities</span>
                </div>
                <div id="endpointInfo_get_all_qualities" class="endpointInfo">
                    <table>
                        <h3 class="underline">Headers</h3>
                        <tr>
                            <td class="underline">Name</td>
                            <td class="underline">Needed</td>
                            <td class="underline">Format</td>
                            <td class="underline">Note</td>
                        </tr>
                        <tr>
                            <td>url</td>
                            <td>True</td>
                            <td>str</td>
                            <td>URL to download.</td>
                        </tr>
                    </table>
                    <br>
                    <h3 class="underline">Result</h3>
                    <span>The endpoint should return a dict (json) with the following structure:
                        <ul>
                            <li>Display name for the user<ul>
                                <li>value: the format ID</li>
                            </ul></li>
                        </ul>
                        <br>
                        As an example:
                        <ul>
                            <li>303 (.webm) 1920x1080<ul>
                                <li>value: 303</li>
                            </ul></li>
                            <li>Choose custom value<ul>
                                <li>value: CUSTOM</li>
                            </ul></li>
                            <li>251 (.webm) audio only<ul>
                                <li>value: 251</li>
                            </ul></li>
                            <li>278 (.webm) 256x144"<ul>
                                <li>value: 278</li>
                            </ul></li>
                        </ul>
                        <br>
                        Note that the "Choose custom value" entry will always be there and have a value of "CUSTOM" for easier handling on the iOS shortcut side.
                    </span>
                </div>
            </div>

            <div id="get_video_endpoint">
                <div class="endpoint GET" onclick="toggle_api('endpointInfo_get_video_endpoint')">
                    <span class="method GET">GET</span>
                    <span>/api/v2.1/get_video</span>
                </div>
                <div id="endpointInfo_get_video_endpoint" class="endpointInfo">
                    <table>
                        <h3 class="underline">Headers</h3>
                        <tr>
                            <td class="underline">Name</td>
                            <td class="underline">Needed</td>
                            <td class="underline">Format</td>
                            <td class="underline">Note</td>
                        </tr>
                        <tr>
                            <td>id</td>
                            <td>False</td>
                            <td>str</td>
                            <td>Format ID for yt-dlp. Best from yt-dlp if none provided.</td>
                        </tr>
                        <tr>
                            <td>url</td>
                            <td>True</td>
                            <td>str</td>
                            <td>URL to download.</td>
                        </tr>
                        <tr>
                            <td>format_extension</td>
                            <td>False</td>
                            <td>str</td>
                            <td>Extension of the final file. mov if none provided.</td>
                        </tr>
                        <tr>
                            <td>dont_retry_as_mkv</td>
                            <td>False</td>
                            <td>any</td>
                            <td>Avoid retrying with mkv as the merge format if something fails.</td>
                        </tr>
                    </table>
                    <br>
                    <h3 class="underline">Result</h3>
                    <span>The endpoint should return the video file you requested.</span>
                </div>
            </div>


        </div>
    </div>
</body>

<style>
    @media only screen and (min-width: 1000px) {
        .split {
            height: 100%;
            width: 50%;
            position: fixed;
            z-index: 1;
            top: 10;
            overflow-x: hidden;
            padding-top: 20px;
        }

        .download {
            left: 0;
        }

        .api {
            right: 0;
        }
    }
    @media only screen and (max-width: 1000px) {
        .api {
            padding-top: 100px;
        }
        

    }
    .centered>*>*,
    .centered>*,
    .centered {
        height: auto;
        margin: 0 auto;
        padding: 10px;
        position: relative;
        text-align: center;
    }


    /* UNC0VER */
    .expandOutElement {
        animation-fill-mode: forwards;
        -webkit-animation-fill-mode: forwards;
        -webkit-animation: expandOut 1.6s;
        animation: expandOut 1.6s;
    }

    .button {
        text-decoration: none;
        display: inline-block;
    }

    .innerbutton {
        cursor: pointer;
        color: var(--tint-text-color);
        /* margin-top: 100px; */
        border-radius: 100px;
        padding: 15px 20px 15px 20px;
        font-weight: var(--semi-bold);
        background-color: var(--tint-color);
        max-width: 150px;
        transition: padding .15s ease;
        -webkit-transition: padding .15s ease;
        -moz-transition: padding .15s ease;
        -o-transition: padding .15s ease;
        -ms-transition: padding .15s ease;
    }

    .unavailable {
        background-color: var(--tint-color-fade);
        color: var(--tint-text-color-fade);
        cursor: not-allowed;
    }

    .innerbutton:hover {
        padding-left: 35px;
        padding-right: 35px;
    }

    .noanimation:hover {
        padding-left: 20px;
        padding-right: 20px;
    }

    .right {
        position: absolute;
        right: 0px;
    }

    #latestDownloadURL,
    #legacyReleases,
    #apiEndpoints {
        font-size: 120%;
    }

    * {
        font-family: -apple-system-font, BlinkMacSystemFont, Open Sans, Helvetica Neue, Helvetica, Arial, sans-serif;
        color: var(--tint-text-color);
        margin: 0;
        /* would be better in a body tag tbh */
    }

    html {
        background-color: #111;
        --tint-color: #CA3D02;
        --tint-color-low: #a23100;
        --tint-color-fade: #6B2607;
        --semi-bold: 600;
        --tint-text-color: #FFF;
        --tint-text-color-fade: #CCBBB3;
    }


    /* Old releases */
    #legacyReleases {
        border-radius: 5px;
        display: block;
        height: 55vh;
        overflow: auto;
    }

    .releaseTableView {
        padding-right: 120px;
        text-align: left;
    }

    hr.solid {
        border: 0;
        border-top: 1px solid #303436;
    }

    .releaseVersion {
        text-decoration: underline;
    }

    /* endpoints */
    #apiEndpoints {
        overflow: auto;
    }
</style>

<style>
    /* ENDPOINTS */
    .method {
        border-radius: 0px 5px 5px 0px;
        padding: 5px !important;
        padding-right: 10px !important;
    }
    .GET {
        background-color: #031625;
    }

    .GET.method {
        display: inline-block;
        background-color: #0A487B;
    }

    .GET.endpoint {
        border: solid 1px #0A487B;
    }

    .endpoint {
        padding: 0px;
        text-align: left;
        cursor: pointer;
    }

    .endpointInfo {
        padding: 0px;
        padding-left: 5px;
        text-align: left;
        background-color: #031625;
        border-radius: 0px 0px 5px 5px;
        border: solid 1px #0A487B;
        border-top: 0;
        display: none;
    }



    table {
        border-collapse: collapse;
        width: 100%;
    }

    td {
        padding-right: 10px;
        /* border-left: 1px solid #0A487B; */
    }

    .underline {
        text-decoration: underline;
    }

    .middle {
        text-align: center;
    }
</style>

<script>
    function toggle_api(name) {
        const div = document.getElementById(name)
        if (div.style.display === "block") {
            div.style.display = "none";
        } else {
            div.style.display = "block";
        }
    }
</script>

</html>