<!DOCTYPE html>
<html>

<head>
    <title>Mediagrabber - index</title>
    <meta name="viewport" content="width=device-width, initial-scale=.75">
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700">
    <link rel="stylesheet" href="/static/css/global.css">
    <link rel="stylesheet" href="/static/css/scrollbar.css">
    <link rel="stylesheet" href="/static/css/doc/endpoints.css">
</head>

<body>
    <div class="centered biggerfont">
        <h1><a href="/" style="left: 0px; position: absolute;">Go back</a></h1><br>
        <h1>API documentation</h1>

        <div id="get_latest_shortcut_version">
            <div class="endpoint GET" onclick="toggle_api('endpointInfo_get_latest_shortcut_version')">
                <span class="method GET">GET</span>
                <span>/api/get_latest_shortcut_version</span>
            </div>
            <div id="endpointInfo_get_latest_shortcut_version" class="endpointInfo">
                <h3 class="underline">Result</h3>
                <span>The endpoint should return the current Shortcut version as a simple string<br>As an example:
                    v2.3.1</span>
            </div>
        </div>

        <div id="get_api_version">
            <div class="endpoint GET" onclick="toggle_api('endpointInfo_get_api_version')">
                <span class="method GET">GET</span>
                <span>/api/get_api_version</span>
            </div>
            <div id="endpointInfo_get_api_version" class="endpointInfo">
                <h3 class="underline">Result</h3>
                <span>The endpoint should return the current API version as a simple string<br>As an example:
                    v2.3</span>
            </div>
        </div>

        <div id="get_basic_info">
            <div class="endpoint GET" onclick="toggle_api('endpointInfo_get_basic_info')">
                <span class="method GET">GET</span>
                <span>/api/v2.1/get_basic_info</span>
            </div>
            <div id="endpointInfo_get_basic_info" class="endpointInfo">
                <table>
                    <h3 class="underline">Headers</h3>
                    <tr>
                        <td class="underline">Name</td>
                        <td class="underline">Needed</td>
                        <td class="underline">Format</td>
                        <td class="underline">Note</td>
                    </tr>
                    <tr>
                        <td>Requested-Url</td>
                        <td>True</td>
                        <td>str</td>
                        <td>URL to get info from.</td>
                    </tr>
                </table>
                <br>
                <h3 class="underline">Result</h3>
                <span>The endpoint returns a dict containing basic info about the video:
                    <ul>
                        <li>The thumbnail URL</li>
                        <li>The video title</li>
                        <li>The video uploader</li>
                        <li>The viewcount</li>
                        <li>The video duration in seconds</li>
                        <li>The video duration formatted hh:mm:ss</li>
                    </ul>
                </span>
            </div>
        </div>

        <div id="get_best_qualities">
            <div class="endpoint GET" onclick="toggle_api('endpointInfo_get_best_qualities')">
                <span class="method GET">GET</span>
                <span>/api/v2.1/get_best_qualities</span>
            </div>
            <div id="endpointInfo_get_best_qualities" class="endpointInfo">
                <table>
                    <h3 class="underline">Headers</h3>
                    <tr>
                        <td class="underline">Name</td>
                        <td class="underline">Needed</td>
                        <td class="underline">Format</td>
                        <td class="underline">Note</td>
                    </tr>
                    <tr>
                        <td>Requested-Url</td>
                        <td>True</td>
                        <td>str</td>
                        <td>URL to download.</td>
                    </tr>
                </table>
                <br>
                <h3 class="underline">Result</h3>
                <span>The endpoint should return a dict (json) with the following structure:
                    <ul>
                        <li>Display name for the user<ul>
                                <li>value: the format ID</li>
                                <li>other (optional): Only on the "see all formats" key, made for easier handling on
                                    the iOS shortcut side. If present, value will always be True (but is irrelevant)
                                </li>
                            </ul>
                        </li>
                    </ul>
                    <br>
                    As an example:
                    <ul>
                        <li>Best video (only)<ul>
                                <li>value: bestvideo</li>
                            </ul>
                        </li>
                        <li>Best audio (only)<ul>
                                <li>value: bestaudio</li>
                            </ul>
                        </li>
                        <li>Best video and best audio merged<ul>
                                <li>value: bestvideo+bestaudio</li>
                            </ul>
                        </li>
                        <li>See all formats<ul>
                                <li>value: null</li>
                                <li>other: True</li>
                            </ul>
                        </li>
                    </ul>
                </span>
            </div>
        </div>

        <div id="get_all_qualities">
            <div class="endpoint GET" onclick="toggle_api('endpointInfo_get_all_qualities')">
                <span class="method GET">GET</span>
                <span>/api/v2.1/get_all_qualities</span>
            </div>
            <div id="endpointInfo_get_all_qualities" class="endpointInfo">
                <table>
                    <h3 class="underline">Headers</h3>
                    <tr>
                        <td class="underline">Name</td>
                        <td class="underline">Needed</td>
                        <td class="underline">Format</td>
                        <td class="underline">Note</td>
                    </tr>
                    <tr>
                        <td>Requested-Url</td>
                        <td>True</td>
                        <td>str</td>
                        <td>URL to download.</td>
                    </tr>
                </table>
                <br>
                <h3 class="underline">Result</h3>
                <span>The endpoint should return a dict (json) with the following structure:
                    <ul>
                        <li>Display name for the user<ul>
                                <li>value: the format ID</li>
                            </ul>
                        </li>
                    </ul>
                    <br>
                    As an example:
                    <ul>
                        <li>303 (.webm) 1920x1080<ul>
                                <li>value: 303</li>
                            </ul>
                        </li>
                        <li>Choose custom value<ul>
                                <li>value: CUSTOM</li>
                            </ul>
                        </li>
                        <li>251 (.webm) audio only<ul>
                                <li>value: 251</li>
                            </ul>
                        </li>
                        <li>278 (.webm) 256x144"<ul>
                                <li>value: 278</li>
                            </ul>
                        </li>
                    </ul>
                    <br>
                    Note that the "Choose custom value" entry will always be there and have a value of "CUSTOM" for
                    easier handling on the iOS shortcut side.
                </span>
            </div>
        </div>

        <div id="get_video_endpoint">
            <div class="endpoint GET" onclick="toggle_api('endpointInfo_get_video_endpoint')">
                <span class="method GET">GET</span>
                <span>/api/v2.1/get_video</span>
            </div>
            <div id="endpointInfo_get_video_endpoint" class="endpointInfo">
                <table>
                    <h3 class="underline">Headers</h3>
                    <tr>
                        <td class="underline">Name</td>
                        <td class="underline">Needed</td>
                        <td class="underline">Format</td>
                        <td class="underline">Note</td>
                    </tr>
                    <tr>
                        <td>Id</td>
                        <td>False</td>
                        <td>str</td>
                        <td>Format ID for yt-dlp. Best from yt-dlp if none provided.</td>
                    </tr>
                    <tr>
                        <td>Requested-Url</td>
                        <td>True</td>
                        <td>str</td>
                        <td>URL to download.</td>
                    </tr>
                    <tr>
                        <td>Format-Extension</td>
                        <td>False</td>
                        <td>str</td>
                        <td>"merge_output_format" parameter for youtube-dlp. Final extension if no Extension-Replace provided</td>
                    </tr>
                    <tr>
                        <td>Extension-Replace</td>
                        <td>False</td>
                        <td>str</td>
                        <td>Extension of the final file. Doesn't change any data, just the filename. Useful to rename .mkv (from format extension) to mov (apple) or mp4 (everything else)</td>
                    </tr>
                    <tr>
                        <td>Dont-Retry-As-Mkv</td>
                        <td>False</td>
                        <td>any</td>
                        <td>Avoid retrying with mkv as the merge format if something fails.</td>
                    </tr>
                </table>
                <br>
                <h3 class="underline">Result</h3>
                <span>The endpoint should return the video file you requested.</span>
            </div>
        </div>
    </div>

    <script>
        function toggle_api(name) {
            const div = document.getElementById(name)
            if (div.style.display === "block") {
                div.style.display = "none";
            } else {
                div.style.display = "block";
            }
        }
    </script>
</body>

</html>